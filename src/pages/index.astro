---
import { format } from 'date-fns';
import { Markup } from 'astro-remote';

import Layout from '../layouts/Layout.astro';

const response = await fetch(`https://api.cosmicjs.com/v2/buckets/${import.meta.env.BUCKET_SLUG}/objects?pretty=true&query=%7B%22type%22%3A%22blog-posts%22%7D&read_key=${import.meta.env.BUCKET_READ_KEY}&limit=20&props=slug,title,content`)
const posts = await response.json();

---

<Layout title="Blog">
	<div>
		{posts.objects.map(post => (
			<article >
				<div style={{ display: 'flex', justifyContent: 'space-between' }}>
					<h4>{post.title}</h4>
				</div>
				<Markup content={post.content} />
			</article>
		))}
	</div>
</Layout>
